WindowManager:
    MainMenuWindow:
    NewGameWindow:
    OpponentSelectionViewWindow:
    UserNameInputScreen:
    RoundSelectionViewWindow:
    GameWindow:
    SettingsWindow:
    ScoreboardWindow:

<MainMenuWindow>:
    name: 'main'

    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/background_main.jpg'

    BoxLayout:
        orientation: 'horizontal'
        spacing: 10
        padding: 20

        Label:

        BoxLayout:
            orientation: 'vertical'
            spacing: 10

            Label:
                text: 'Rock Paper Scissor Gesture'
                font_size: 60

            Label:

            Button:
                text: 'New Game'
                on_release:
                    app.root.transition.direction = 'left'
                    app.root.current = 'newgame'
                size_hint: None, None
                size: 160, 50
                pos_hint: {'center_x': 0.5}

            Button:
                text: 'Settings'
                on_release:
                    app.root.transition.direction = 'left'
                    app.root.current = 'settings'
                size_hint: None, None
                size: 160, 50
                pos_hint: {'center_x': 0.5}

            Button:
                text: 'Scoreboard'
                on_release:
                    app.root.transition.direction = 'left'
                    app.root.current = 'scoreboard'
                size_hint: None, None
                size: 160, 50
                pos_hint: {'center_x': 0.5}

            Label:

            Label:
                text: 'Press ESC to exit anytime'

        Label:

<NewGameWindow>:
    name: 'newgame'

    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/background_main.jpg'

    BoxLayout:
        orientation: 'horizontal'
        spacing: 10
        padding: 20

        Label:

        BoxLayout:
            orientation: 'vertical'
            spacing: 10

            Label:
                text: 'Select game mode'
                font_size: 60

            Label:

            GameMode1:
                text: 'Rock Paper Scissor'
                on_press:
                    app.root.transition.direction = 'left'
                    self.set_game_mode(1)
                on_release:
                    app.root.current = 'opponentselectionview'
                size_hint: None, None
                size: 200, 50
                pos_hint: {'center_x': 0.5}

            GameMode2:
                text: 'Rock Paper Scissor Lizard Spock'
                on_press:
                    app.root.transition.direction = 'left'
                    self.set_game_mode(2)
                on_release:
                    app.root.current = 'opponentselectionview'
                size_hint: None, None
                size: 300, 50
                pos_hint: {'center_x': 0.5}

            GameMode3:
                text: 'Rock Paper Scissor Lizard Spock Wizard Batman Spiderman Glock'
                on_press:
                    app.root.transition.direction = 'left'
                    self.set_game_mode(3)
                on_release:
                    app.root.current = 'opponentselectionview'
                size_hint: None, None
                size: 500, 50
                pos_hint: {'center_x': 0.5}


            Label:

            Button:
                text: 'Back'
                on_release:
                    app.root.transition.direction = 'right'
                    app.root.current = 'main'
                size_hint: None, None
                size: 160, 50
                pos_hint: {'center_x': 0.5}

        Label:

<OpponentSelectionViewWindow>:
    name: 'opponentselectionview'

    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/background_main.jpg'

    BoxLayout:
        orientation: 'horizontal'
        spacing: 10
        padding: 20

        Label:

        BoxLayout:
            orientation: 'vertical'
            spacing: 10

            Label:
                text: 'Select your opponent'
                font_size: 60

            Label:

            Computer:
                text: 'Computer'
                on_press:
                    self.set_opponent(1)
                on_release:
                    app.root.transition.direction = 'left'
                    app.root.current = 'username'
                size_hint: None, None
                size: 160, 50
                pos_hint: {'center_x': 0.5}

            Other:
                text: 'Other player'
                on_press:
                    app.root.transition.direction = 'left'
                    self.set_opponent(2)
                on_release:
                    app.root.current = 'username'
                size_hint: None, None
                size: 160, 50
                pos_hint: {'center_x': 0.5}

            Label:

            Button:
                text: 'Back'
                on_release:
                    app.root.transition.direction = 'right'
                    app.root.current = 'newgame'
                size_hint: None, None
                size: 160, 50
                pos_hint: {'center_x': 0.5}

        Label:

<UserNameInputScreen>:
    name: 'username'

    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/background_main.jpg'

    BoxLayout:
        orientation: 'horizontal'
        spacing: 10
        padding: 20

        Label:

        BoxLayout:
            orientation: 'vertical'

            Label:
                text: 'Enter your username'
                font_size: 60

            Label:

            BoxLayout:
                orientation: 'horizontal'

                BoxLayout:
                    orientation: 'vertical'
                    spacing: 10
                    padding: 20

                    Label:
                        text: 'Player 1\'s username:'
                        size_hint_y: None
                        height: 50
                        multiline: False

                    Label:
                        text: 'Player 2\'s username:'
                        size_hint_y: None
                        height: 50
                        multiline: False

                BoxLayout:
                    orientation: 'vertical'
                    spacing: 10
                    padding: 20

                    TextInput:
                        id: player1_username
                        size_hint_y: None
                        height: 50
                        multiline: False

                    TextInput:
                        id: player2_username
                        multiline: False
                        size_hint_y: None
                        height: 50

            Label:

            Label:
                text: 'If you\'re against the computer, you should not fill the second input field.\n Also, you can leave both empty, in that case the default names will be applied.'

            BoxLayout:
                orientation: 'horizontal'

                Button:
                    text: 'Back'
                    on_release:
                        app.root.transition.direction = 'right'
                        app.root.current = 'opponentselectionview'
                    size_hint: None, None
                    size: 160, 50

                Label:

                NextButton:
                    text: 'Next'
                    on_release:
                        app.root.transition.direction = 'left'
                        app.root.current = 'round'
                    on_press:
                        self.save_username(player1_username.text, player2_username.text)
                    size_hint: None, None
                    size: 160, 50

        Label:

<RoundSelectionViewWindow>:
    name: 'round'

    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/background_main.jpg'

    BoxLayout:
        orientation: 'horizontal'
        spacing: 10
        padding: 20

        Label:

        BoxLayout:
            orientation: 'vertical'

            Label:
                text: 'Select the number of rounds'
                font_size: 60

            Label:

            BoxLayout:
                orientation: 'horizontal'

                Round3Button:
                    text: '3'
                    font_size: 40
                    on_release:
                        app.root.transition.direction = 'left'
                        app.root.current = 'game'
                    on_press:
                        self.set_rounds(3)

                Round5Button:
                    text: '5'
                    font_size: 40
                    on_release:
                        app.root.transition.direction = 'left'
                        app.root.current = 'game'
                    on_press:
                        self.set_rounds(5)

                Round7Button:
                    text: '7'
                    font_size: 40
                    on_release:
                        app.root.transition.direction = 'left'
                        app.root.current = 'game'
                    on_press:
                        self.set_rounds(7)

                Round9Button:
                    text: '9'
                    font_size: 40
                    on_release:
                        app.root.transition.direction = 'left'
                        app.root.current = 'game'
                    on_press:
                        self.set_rounds(9)

            Label:

            Button:
                text: 'Back'
                on_release:
                    app.root.transition.direction = 'right'
                    app.root.current = 'username'
                size_hint: None, None
                size: 160, 50
                pos_hint: {'center_x': 0.5}

        Label:

<GameWindow>:
    name: 'game'

    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/background_main.jpg'

    BoxLayout:
        orientation: 'horizontal'
        spacing: 10
        padding: 20

        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.25

            Label:
                id: player1_name
                font_size: 40

            BoxLayout:
                orientation: 'vertical'
                spacing: 10
                padding: 20

                BoxLayout:
                    orientation: 'horizontal'

                    Label:
                        text: 'Score:'
                        font_size: 20

                    Label:
                        id: p1_score
                        font_size: 40

                BoxLayout:
                    orientation: 'horizontal'

                    Label:
                        text: 'Round:'
                        font_size: 20

                    Label:
                        id: player1_round
                        font_size: 40

                BoxLayout:
                    orientation: 'horizontal'

                    Label:
                        id: countdown_p1
                        font_size: 40

            Label:
                id: player1_info
                font_size: 30

        BoxLayout:
            orientation: 'vertical'
            spacing: 20

            CameraFrame:
                id: camera_frame
                allow_stretch: True
                size_hint_y: 0.6

            BoxLayout:
                orientation: 'horizontal'
                padding: 20
                size_hint_y: 0.3

                Image:
                    id: gesture_image_p1
                    allow_stretch: True

                Label:
                    id: who_won_round
                    width: 160
                    font_size: 60
                    size_hint: None, None

                Image:
                    id: gesture_image_p2
                    allow_stretch: True

            BoxLayout:
                orientation: 'horizontal'
                spacing: 10
                padding: 20
                size_hint_y: 0.1

                Label:
                    id: gesture_text_p1

                Button:
                    id: game_main_button
                    text: 'Back to Main'
                    on_release:
                        app.root.transition.direction = 'right'
                        app.root.current = 'main'
                    size_hint: None, None
                    size: 160, 50
                    pos_hint: {'center_x': 0.5}

                Label:
                    id: gesture_text_p2

        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.25

            Label:
                id: player2_name
                font_size: 40

            BoxLayout:
                orientation: 'vertical'
                spacing: 10
                padding: 20

                BoxLayout:
                    orientation: 'horizontal'

                    Label:
                        text: 'Score:'
                        font_size: 20

                    Label:
                        id: p2_score
                        font_size: 40

                BoxLayout:
                    orientation: 'horizontal'

                    Label:
                        text: 'Round:'
                        font_size: 20

                    Label:
                        id: player2_round
                        font_size: 40

                BoxLayout:
                    orientation: 'horizontal'

                    Label:
                        id: countdown_p2
                        font_size: 40

            Label:
                id: player2_info
                font_size: 30


<SettingsWindow>:
    name: 'settings'

    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/background_main.jpg'

    BoxLayout:
        orientation: 'horizontal'
        spacing: 10
        padding: 20

        Label:

        BoxLayout:
            orientation: 'vertical'

            Label:
                text: 'Settings'
                font_size: 60

            Label:

            BoxLayout:
                orientation: 'horizontal'

                BoxLayout:
                    orientation: 'vertical'

                    Label:
                        text: 'Minimum detection confidence:'

                    Label:
                        text: 'Minimum tracking confidence:'

                    Label:
                        text: 'Camera device:'

                BoxLayout:
                    orientation: 'vertical'

                    BoxLayout:
                        orientation: 'horizontal'

                        MinDetectionConfidenceSwitch:
                            id: min_det_conf
                            min: 0.3
                            max: 0.9
                            step: 0.1
                            orientation: 'horizontal'
                            on_touch_up:
                                self.save_value_on_touch_up()

                        Label:
                            text: str(min_det_conf.value)
                            size_hint_x: 0.3

                    BoxLayout:
                        orientation: 'horizontal'

                        MinTrackingConfidenceSwitch:
                            id: min_tra_conf
                            min: 0.3
                            max: 0.9
                            step: 0.1
                            orientation: 'horizontal'
                            on_touch_up:
                                self.save_value_on_touch_up()

                        Label:
                            text: str(min_tra_conf.value)
                            size_hint_x: 0.3

                    BoxLayout:
                        orientation: 'horizontal'

                        CameraSelectionButton:
                            on_press:
                                self.on_button_click()
                            text: 'Find all'

                        Label:
                            id: cam_device_label

            Label:

            Button:
                text: 'Back'
                on_release:
                    app.root.transition.direction = 'right'
                    app.root.current = 'main'
                size_hint: None, None
                size: 160, 50
                pos_hint: {'center_x': 0.5}

        Label:

<ScoreboardWindow>:
    name: 'scoreboard'

    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/background_main.jpg'

    BoxLayout:
        orientation: 'horizontal'
        spacing: 10
        padding: 20

        Label:

        BoxLayout:
            orientation: 'vertical'

            Label:
                text: 'Scoreboard'
                font_size: 60

            Label:

            Label:

            Label:

            Button:
                text: 'Back'
                on_release:
                    app.root.transition.direction = 'right'
                    app.root.current = 'main'
                size_hint: None, None
                size: 160, 50
                pos_hint: {'center_x': 0.5}

        Label: