WindowManager:
    MainMenuWindow:
    NewGameWindow:
    OpponentSelectionViewWindow:
    DifficultySelectionViewWindow:
    GameWindow:
    SettingsWindow:
    ScoreboardWindow:

<MainMenuWindow>:
    name: "main"

    GridLayout:
        rows: 5
        row_default_height: 60

        Label:
            text: "Rock Paper Scissor Gesture"
            font_size: 24

        Button:
            size_hint: None, None
            size: 200, 50
            text: "New Game"
            on_release:
                app.root.current = "newgame"

        Button:
            size_hint: None, None
            size: 200, 50
            text: "Settings"
            on_release:
                app.root.current = "settings"

        Button:
            size_hint: None, None
            size: 200, 50
            text: "Scoreboard"
            on_release:
                app.root.current = "scoreboard"

        Label:
            text: "Press ESC to exit anytime"

<NewGameWindow>:
    name: "newgame"

    GridLayout:
        rows: 5
        row_default_height: 60

        Label:
            text: "Select game mode"

        GameMode1:
            text: "Rock Paper Scissor"
            on_press:
                self.set_game_mode(1)
            on_release:
                app.root.current = "opponentselectionview"

        GameMode2:
            text: "Rock Paper Scissor Lizard Spock"
            on_press:
                self.set_game_mode(2)
            on_release:
                app.root.current = "opponentselectionview"

        GameMode3:
            text: "Rock Paper Scissor Lizard Spock Mage Batman Spiderman Glock"
            on_press:
                self.set_game_mode(3)
            on_release:
                app.root.current = "opponentselectionview"

        Button:
            text: "Back"
            on_release:
                app.root.current = "main"

<OpponentSelectionViewWindow>:
    name: "opponentselectionview"

    GridLayout:
        rows: 4

        Label:
            text: "Select your opponent"

        Computer:
            text: "Computer"
            on_press:
                self.set_opponent(1)
            on_release:
                app.root.current = "difficultyselectionview"

        Other:
            text: "Other player"
            on_press:
                self.set_opponent(2)
            on_release:
                app.root.current = "game"

        Button:
            text: "Back"
            on_release:
                app.root.current = "newgame"

<DifficultySelectionViewWindow>:
    name: "difficultyselectionview"

    GridLayout:
        rows: 5

        Label:
            text: "Select difficulty"

        EasyButton:
            text: "Easy"
            on_press:
                self.set_difficulty(1)
            on_release:
                app.root.current = "game"

        NormalButton:
            text: "Normal"
            on_press:
                self.set_difficulty(2)
            on_release:
                app.root.current = "game"

        HardButton:
            text: "Hard"
            on_press:
                self.set_difficulty(3)
            on_release:
                app.root.current = "game"

        Button:
            text: "Back"
            on_release:
                app.root.current = "opponentselectionview"

<GameWindow>:
    name: "game"

    GridLayout:
        rows: 3

        Label:
            text: "Live camera feed"

        CameraFrame:
            name: "camframe"

        Button:
            text: "Back to main menu"
            on_release:
                app.root.current = "main"

<SettingsWindow>:
    name: "settings"

    GridLayout:
        rows: 4

        Label:
            text: "Settings"

        GridLayout:
            rows: 4
            cols: 2

            Label:
                text: "Logging:"

            GridLayout:
                rows: 1
                cols: 2

                LoggingOffButton:
                    text: "Logging off"
                    on_press:
                        self.log_off_click()

                LoggingOnButton:
                    text: "Logging on"
                    on_press:
                        self.log_on_click()

            Label:
                text: "Minimum detection confidence:"

            GridLayout:
                rows: 1
                cols: 2

                MinDetectionConfidenceSwitch:
                    id: min_det_conf
                    min: 0.3
                    max: 0.9
                    step: 0.1
                    orientation: "horizontal"
                    on_touch_up:
                        self.save_value_on_touch_up()

                Label:
                    text: str(min_det_conf.value)

            Label:
                text: "Minimum tracking confidence:"

            GridLayout:
                rows: 1
                cols: 2

                MinTrackingConfidenceSwitch:
                    id: min_tra_conf
                    min: 0.3
                    max: 0.9
                    step: 0.1
                    orientation: "horizontal"
                    on_touch_up:
                        self.save_value_on_touch_up()

                Label:
                    text: str(min_tra_conf.value)

            Label:
                text: "Resolution:"

            Button:
                text: "TODO: popup window or custom dropdown list"

        Label:
            text: "Changes will take effect after restart."

        Button:
            text: "Back"
            on_release:
                app.root.current = "main"

<ScoreboardWindow>:
    name: "scoreboard"

    GridLayout:
        rows: 2

        Label:
            text: "Scoreboard"

        Button:
            text: "Back"
            on_release:
                app.root.current = "main"